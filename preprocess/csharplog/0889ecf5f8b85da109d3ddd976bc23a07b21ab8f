commit 0889ecf5f8b85da109d3ddd976bc23a07b21ab8f
Author:     sharwell <sharwell@pixelminegames.com>
AuthorDate: Thu Apr 7 11:53:22 2011 -0800
Commit:     sharwell <sharwell@pixelminegames.com>
CommitDate: Thu Apr 7 11:53:22 2011 -0800

(C# 3) Allow .g3 file extension for imported grammars

[git-p4: depot-paths = "//depot/code/antlrcs/main/": change = 8096]

diff --git a/Antlr3/Tool/Grammar.cs b/Antlr3/Tool/Grammar.cs
index 72ee39e..394eba0 100644
--- a/Antlr3/Tool/Grammar.cs
+++ b/Antlr3/Tool/Grammar.cs
@@ -73,6 +73,7 @@ namespace Antlr3.Tool
public const string SynpredRulePrefix = "synpred";

public const string GrammarFileExtension = ".g";
+        public const string AltGrammarFileExtension = ".g3";

/** used for generating lexer temp files */
public const string LexerGrammarFileExtension = ".g";
@@ -2901,6 +2902,12 @@ namespace Antlr3.Tool
try
{
string fullName = tool.GetLibraryFile( gname );
+                if (!File.Exists(fullName))
+                {
+                    gname = grammarName + AltGrammarFileExtension;
+                    fullName = tool.GetLibraryFile(gname);
+                }
+
//FileReader fr = new FileReader( fullName );
//br = new BufferedReader( fr );
br = new StringReader( System.IO.File.ReadAllText( fullName ) );

