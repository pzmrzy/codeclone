commit ca9599ae85ba89bbb28da56aeb1b4d86680eaeb8
Author:     sharwell <sharwell@pixelminegames.com>
AuthorDate: Wed Jan 20 17:37:53 2010 -0800
Commit:     sharwell <sharwell@pixelminegames.com>
CommitDate: Wed Jan 20 17:37:53 2010 -0800

C# Port:
* Merge 6473

[git-p4: depot-paths = "//depot/code/antlrcs/main/": change = 6588]

diff --git a/Antlr3.Test/ST4/TestRuntimeErrors.cs b/Antlr3.Test/ST4/TestRuntimeErrors.cs
index 33a1073..e16b088 100644
--- a/Antlr3.Test/ST4/TestRuntimeErrors.cs
+++ b/Antlr3.Test/ST4/TestRuntimeErrors.cs
@@ -203,6 +203,7 @@ namespace AntlrUnitTests.ST4

WriteFile(tmpdir, "t.stg", templates);
STGroup group = new STGroupFile(Path.Combine(tmpdir, "t.stg"));
+            group.Debug = true;
ST st = group.GetInstanceOf("t");
st.Render();
String expected = "context [t, u] 1:1 attribute x isn't defined" + newline;
diff --git a/StringTemplate4/Interpreter.cs b/StringTemplate4/Interpreter.cs
index 97b7288..cc587d9 100644
--- a/StringTemplate4/Interpreter.cs
+++ b/StringTemplate4/Interpreter.cs
@@ -1167,12 +1167,11 @@ namespace StringTemplate
*  the formal parameters up the enclosing chain to see if it exists;
*  if it exists all is well, but if not, record an error.
*
-         *  Don't do the check if tombu mode. (i.e., don't check if no formal
-         *  parameters exist).
+         *  Don't do the check unless debugging and only if not tombu mode.
*/
protected void CheckNullAttributeAgainstFormalArguments(Template self, string name)
{
-            if (ErrorManager.CompatibilityMode)
+            if (!group.Debug || ErrorManager.CompatibilityMode)
return; // ignore unknown args in tombu mode

Template p = self;

