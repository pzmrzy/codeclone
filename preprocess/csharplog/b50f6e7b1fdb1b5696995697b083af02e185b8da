commit b50f6e7b1fdb1b5696995697b083af02e185b8da
Author:     sharwell <sharwell@pixelminegames.com>
AuthorDate: Fri Jun 17 05:58:22 2011 -0800
Commit:     sharwell <sharwell@pixelminegames.com>
CommitDate: Fri Jun 17 05:58:22 2011 -0800

(C# 3) Fix label declarations in generated code for synpred fragments

[git-p4: depot-paths = "//depot/code/antlrcs/main/": change = 8648]

diff --git a/Antlr3/Grammars/CodeGenTreeWalker.g3 b/Antlr3/Grammars/CodeGenTreeWalker.g3
index 4ed408b..7d26e2b 100644
--- a/Antlr3/Grammars/CodeGenTreeWalker.g3
+++ b/Antlr3/Grammars/CodeGenTreeWalker.g3
@@ -181,15 +181,6 @@ rule returns [StringTemplate code=null]
blockNestingLevel = RULE_BLOCK_NESTING_LEVEL-1;
Rule ruleDescr = grammar.GetRule($start.GetChild(0).Text);
currentRuleName = $start.GetChild(0).Text;
-
-	// For syn preds, we don't want any AST code etc... in there.
-	// Save old templates ptr and restore later.  Base templates include Dbg.
-	TemplateGroup saveGroup = templates;
-	if ( ruleDescr.IsSynPred )
-	{
-		templates = generator.BaseTemplates;
-	}
-
string description = string.Empty;
}
:	^(	RULE id=ID
@@ -285,7 +276,6 @@ rule returns [StringTemplate code=null]
}
}
;
-finally { templates = saveGroup; }

modifier
:	'protected'

