commit e3e33fc42fe37b5e17c3a1ebd9f1187285217dc0
Author:     sharwell <sharwell@pixelminegames.com>
AuthorDate: Fri Feb 25 19:18:05 2011 -0800
Commit:     sharwell <sharwell@pixelminegames.com>
CommitDate: Fri Feb 25 19:18:05 2011 -0800

(C# 3) Fix NullReferenceException

[git-p4: depot-paths = "//depot/code/antlrcs/main/": change = 7768]

diff --git a/Antlr4.StringTemplate/Misc/ErrorManager.cs b/Antlr4.StringTemplate/Misc/ErrorManager.cs
index 418d331..0c0cc73 100644
--- a/Antlr4.StringTemplate/Misc/ErrorManager.cs
+++ b/Antlr4.StringTemplate/Misc/ErrorManager.cs
@@ -119,7 +119,7 @@ namespace Antlr4.StringTemplate.Misc

public virtual void CompiletimeError(ErrorType error, IToken templateToken, IToken t, object arg)
{
-            string srcName = t.InputStream.SourceName;
+            string srcName = t != null && t.InputStream != null ? t.InputStream.SourceName : null;
if (srcName != null)
srcName = Path.GetFileName(srcName);


