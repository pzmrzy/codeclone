commit fee114c51868e4f8963cc9c03b20ae26e392d7eb
Author:     sharwell <sharwell@pixelminegames.com>
AuthorDate: Mon Apr 11 12:43:01 2011 -0800
Commit:     sharwell <sharwell@pixelminegames.com>
CommitDate: Mon Apr 11 12:43:01 2011 -0800

(C# 3) More informative error messages

[git-p4: depot-paths = "//depot/code/antlrcs/main/": change = 8170]

diff --git a/AntlrBuildTask/AntlrClassGenerationTaskInternal.cs b/AntlrBuildTask/AntlrClassGenerationTaskInternal.cs
index bc29006..c695bb4 100644
--- a/AntlrBuildTask/AntlrClassGenerationTaskInternal.cs
+++ b/AntlrBuildTask/AntlrClassGenerationTaskInternal.cs
@@ -142,6 +142,9 @@ namespace Antlr3.Build.Tasks
}
catch (Exception e)
{
+                if (e is TargetInvocationException && e.InnerException != null)
+                    e = e.InnerException;
+
_buildMessages.Add(new BuildMessage(e.Message));
throw;
}

