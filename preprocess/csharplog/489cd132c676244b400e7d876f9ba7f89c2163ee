commit 489cd132c676244b400e7d876f9ba7f89c2163ee
Author:     sharwell <sharwell@pixelminegames.com>
AuthorDate: Tue Oct 25 14:32:48 2011 -0800
Commit:     sharwell <sharwell@pixelminegames.com>
CommitDate: Tue Oct 25 14:32:48 2011 -0800

C#: SemanticContext fast return for true/false passed to and/or

[git-p4: depot-paths = "//depot/code/antlrcs/main/": change = 9196]

diff --git a/Antlr3/Analysis/SemanticContext.cs b/Antlr3/Analysis/SemanticContext.cs
index 0fee07b..b4ee207 100644
--- a/Antlr3/Analysis/SemanticContext.cs
+++ b/Antlr3/Analysis/SemanticContext.cs
@@ -675,6 +675,9 @@ namespace Antlr3.Analysis
[CLSCompliant(false)]
public static SemanticContext And(SemanticContext a, SemanticContext b)
{
+            if (a is FalsePredicate || b is FalsePredicate)
+                return FalsePredicate.Instance;
+
SemanticContext commonTerms = FactorOr(ref a, ref b);
bool factored = commonTerms != null && commonTerms != EmptySemanticContext && !(commonTerms is TruePredicate);
if (factored)
@@ -707,6 +710,9 @@ namespace Antlr3.Analysis
[CLSCompliant(false)]
public static SemanticContext Or(SemanticContext a, SemanticContext b)
{
+            if (a is TruePredicate || b is TruePredicate)
+                return TruePredicate.Instance;
+
SemanticContext commonTerms = FactorAnd(ref a, ref b);
bool factored = commonTerms != null && commonTerms != EmptySemanticContext && !(commonTerms is FalsePredicate);
if (factored)

