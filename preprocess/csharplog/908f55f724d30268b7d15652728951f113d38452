commit 908f55f724d30268b7d15652728951f113d38452
Author:     sharwell <sharwell@pixelminegames.com>
AuthorDate: Sat Jul 30 11:26:32 2011 -0800
Commit:     sharwell <sharwell@pixelminegames.com>
CommitDate: Sat Jul 30 11:26:32 2011 -0800

(C# 3) Improved support for delegate grammars in the build process

[git-p4: depot-paths = "//depot/code/antlrcs/main/": change = 8956]

diff --git a/AntlrBuildTask/Antlr3.targets b/AntlrBuildTask/Antlr3.targets
index b57c5e0..3a440da 100644
--- a/AntlrBuildTask/Antlr3.targets
+++ b/AntlrBuildTask/Antlr3.targets
@@ -81,6 +81,7 @@
<ItemGroup Condition="'$(BuildingInsideVisualStudio)'=='true'">
<AvailableItemName Include="Antlr3" />
<AvailableItemName Include="AntlrTokens" />
+    <AvailableItemName Include="AntlrAbstractGrammar" />
</ItemGroup>

<Target Name="AntlrCompileReadGeneratedFileList">
@@ -107,7 +108,7 @@
<Target Name="AntlrCompile"
DependsOnTargets="$(AntlrCompileDependsOn)"
Condition="'@(Antlr3)' != ''"
-          Inputs="@(Antlr3);@(AntlrTokens)"
+          Inputs="@(Antlr3);@(AntlrTokens);@(AntlrAbstractGrammar)"
Outputs="@(AntlrOutputCodeFilesList);
$(IntermediateOutputPath)$(AntlrGenCodeFileNames);">

@@ -126,7 +127,8 @@
Language="$(Language)"
SourceCodeFiles="@(Antlr3)"
ContinueOnError="$(_IntellisenseOnlyCompile)"
-      TokensFiles="@(AntlrTokens)">
+      TokensFiles="@(AntlrTokens)"
+      AbstractGrammarFiles="@(AntlrAbstractGrammar)">

<Output ItemName="AntlrGeneratedCodeFiles" TaskParameter="GeneratedCodeFiles" />
<Output ItemName="Compile" TaskParameter="GeneratedCodeFiles" />
diff --git a/AntlrBuildTask/AntlrClassGenerationTask.cs b/AntlrBuildTask/AntlrClassGenerationTask.cs
index 7b38821..b4b30a1 100644
--- a/AntlrBuildTask/AntlrClassGenerationTask.cs
+++ b/AntlrBuildTask/AntlrClassGenerationTask.cs
@@ -92,6 +92,12 @@ namespace Antlr3.Build.Tasks
set;
}

+        public ITaskItem[] AbstractGrammarFiles
+        {
+            get;
+            set;
+        }
+
public string GeneratedSourceExtension
{
get;

