commit 6bd35680cdd89c14b06cef2442222475401ddf0a
Author:     sharwell <sharwell@pixelminegames.com>
AuthorDate: Sun Nov 21 14:07:05 2010 -0800
Commit:     sharwell <sharwell@pixelminegames.com>
CommitDate: Sun Nov 21 14:07:05 2010 -0800

Update assembly version property

[git-p4: depot-paths = "//depot/code/antlrcs/main/": change = 7111]

diff --git a/Antlr3/AntlrTool.cs b/Antlr3/AntlrTool.cs
index c91d8ef..8269aa1 100644
--- a/Antlr3/AntlrTool.cs
+++ b/Antlr3/AntlrTool.cs
@@ -53,7 +53,6 @@ namespace Antlr3

public class AntlrTool
{
-        public const string AssemblyVersion = "3.1.2";
public const string UninitializedDir = "<unset-dir>";

private IList<string> grammarFileNames = new List<string>();
@@ -140,6 +139,15 @@ namespace Antlr3
ProcessArgs( args );
}

+        public static Version AssemblyVersion
+        {
+            get
+            {
+                var assembly = typeof(AntlrTool).Assembly;
+                return assembly.GetName().Version;
+            }
+        }
+
public static string ToolPathRoot
{
get;
@@ -162,7 +170,7 @@ namespace Antlr3
{
if ( verbose )
{
-                ErrorManager.Info( "ANTLR Parser Generator  Version " + AssemblyVersion );
+                ErrorManager.Info( "ANTLR Parser Generator  Version " + AssemblyVersion.ToString(4) );
showBanner = false;
}

@@ -493,7 +501,7 @@ namespace Antlr3
// before setting options. The banner won't display that way!
if ( Verbose && showBanner )
{
-                ErrorManager.Info( "ANTLR Parser Generator  Version " + AssemblyVersion );
+                ErrorManager.Info( "ANTLR Parser Generator  Version " + AssemblyVersion.ToString(4) );
showBanner = false;
}

@@ -837,7 +845,7 @@ namespace Antlr3

private static void Version()
{
-            ErrorManager.Info( "ANTLR Parser Generator  Version " + AntlrTool.AssemblyVersion );
+            ErrorManager.Info( "ANTLR Parser Generator  Version " + AntlrTool.AssemblyVersion.ToString(4) );
}

private static void Help()
diff --git a/Antlr3/Codegen/CodeGenerator.cs b/Antlr3/Codegen/CodeGenerator.cs
index db89798..480f78c 100644
--- a/Antlr3/Codegen/CodeGenerator.cs
+++ b/Antlr3/Codegen/CodeGenerator.cs
@@ -682,8 +682,8 @@ namespace Antlr3.Codegen
target.GetTargetStringLiteralFromString( grammar.FileName );
outputFileST.SetAttribute( "fileName", targetAppropriateFileNameString );
headerFileST.SetAttribute( "fileName", targetAppropriateFileNameString );
-            outputFileST.SetAttribute( "ANTLRVersion", AntlrTool.AssemblyVersion );
-            headerFileST.SetAttribute( "ANTLRVersion", AntlrTool.AssemblyVersion );
+            outputFileST.SetAttribute( "ANTLRVersion", AntlrTool.AssemblyVersion.ToString(4) );
+            headerFileST.SetAttribute( "ANTLRVersion", AntlrTool.AssemblyVersion.ToString(4) );
outputFileST.SetAttribute( "generatedTimestamp", AntlrTool.GetCurrentTimeStamp() );
headerFileST.SetAttribute( "generatedTimestamp", AntlrTool.GetCurrentTimeStamp() );


