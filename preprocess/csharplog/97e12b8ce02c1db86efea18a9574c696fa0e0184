commit 97e12b8ce02c1db86efea18a9574c696fa0e0184
Author:     sharwell <sharwell@pixelminegames.com>
AuthorDate: Sat Nov 20 21:40:19 2010 -0800
Commit:     sharwell <sharwell@pixelminegames.com>
CommitDate: Sat Nov 20 21:40:19 2010 -0800

(C# 3) Tracing via ConditionalAttribute instead of passing the argument to the grammar generator
Moved many debug options into the main templates with ConditionalAttribute
Improved grammar invocation stacks via the new GrammarRuleAttribute
Several new partial method stubs for extending parsers
Add ITokenStreamInformation to make it easier to get information for exceptions - the unbuffered streams need to implement this eventually

[git-p4: depot-paths = "//depot/code/antlrcs/main/": change = 7077]

diff --git a/Antlr3.StringTemplate/Language/ActionParserHelper.cs b/Antlr3.StringTemplate/Language/ActionParserHelper.cs
index 6478cd6..ae35fd1 100644
--- a/Antlr3.StringTemplate/Language/ActionParserHelper.cs
+++ b/Antlr3.StringTemplate/Language/ActionParserHelper.cs
@@ -33,6 +33,7 @@
namespace Antlr3.ST.Language
{
using Antlr.Runtime;
+    using ITreeAdaptor = Antlr.Runtime.Tree.ITreeAdaptor;

partial class ActionParser
{
@@ -48,9 +49,9 @@ namespace Antlr3.ST.Language
this.self = self;
}

-        partial void InitializeTreeAdaptor()
+        partial void CreateTreeAdaptor(ref ITreeAdaptor adaptor)
{
-            TreeAdaptor = new StringTemplateTreeAdaptor();
+            adaptor = new StringTemplateTreeAdaptor();
}

public override void ReportError( RecognitionException e )
diff --git a/Antlr3/Grammars/ANTLRParserHelper.cs b/Antlr3/Grammars/ANTLRParserHelper.cs
index a9e6d77..c1fd6e4 100644
--- a/Antlr3/Grammars/ANTLRParserHelper.cs
+++ b/Antlr3/Grammars/ANTLRParserHelper.cs
@@ -211,9 +211,9 @@ namespace Antlr3.Grammars
return input.LT( k );
}

-        partial void InitializeTreeAdaptor()
+        partial void CreateTreeAdaptor(ref ITreeAdaptor adaptor)
{
-            TreeAdaptor = new grammar_Adaptor( this );
+            adaptor = new grammar_Adaptor(this);
}

protected virtual GrammarAST SetToBlockWithSet( GrammarAST b )

