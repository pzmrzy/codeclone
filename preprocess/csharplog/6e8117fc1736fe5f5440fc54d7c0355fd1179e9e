commit 6e8117fc1736fe5f5440fc54d7c0355fd1179e9e
Author:     sharwell <sharwell@pixelminegames.com>
AuthorDate: Wed Apr 13 18:27:50 2011 -0800
Commit:     sharwell <sharwell@pixelminegames.com>
CommitDate: Wed Apr 13 18:27:50 2011 -0800

(C# 3) Fix a number of bugs introduced by CL8195 (consolidating rule return scopes)

[git-p4: depot-paths = "//depot/code/antlrcs/main/": change = 8212]

diff --git a/Antlr3/Codegen/CodeGenerator.cs b/Antlr3/Codegen/CodeGenerator.cs
index 33d4617..74f50df 100644
--- a/Antlr3/Codegen/CodeGenerator.cs
+++ b/Antlr3/Codegen/CodeGenerator.cs
@@ -1383,8 +1383,8 @@ namespace Antlr3.Codegen
//parser.setASTNodeClass( "org.antlr.tool.GrammarAST" );
try
{
-                    ANTLRParser.rewrite_template_return result = parser.rewrite_template();
-                    rewriteTree = (GrammarAST)result.Tree;
+                    Antlr.Runtime.IAstRuleReturnScope<GrammarAST> result = parser.rewrite_template();
+                    rewriteTree = result.Tree;
}
catch ( RecognitionException /*re*/ )
{
diff --git a/Antlr3/Grammars/ANTLRTreePrinterHelper.cs b/Antlr3/Grammars/ANTLRTreePrinterHelper.cs
index fc8642b..fd68a9d 100644
--- a/Antlr3/Grammars/ANTLRTreePrinterHelper.cs
+++ b/Antlr3/Grammars/ANTLRTreePrinterHelper.cs
@@ -33,6 +33,7 @@
namespace Antlr3.Grammars
{
using Antlr.Runtime;
+    using Antlr.Runtime.Tree;
using Antlr3.Tool;

using CommonTreeNodeStream = Antlr.Runtime.Tree.CommonTreeNodeStream;
@@ -45,7 +46,7 @@ namespace Antlr3.Grammars
protected bool showActions;
protected StringBuilder buf = new StringBuilder( 300 );

-        private ANTLRTreePrinter.block_return Block( GrammarAST t, bool forceParens )
+        private TreeRuleReturnScope<GrammarAST> Block( GrammarAST t, bool forceParens )
{
ANTLRTreePrinter other = new ANTLRTreePrinter(new CommonTreeNodeStream(t));
other.buf = buf;
diff --git a/Antlr3/Tool/Grammar.cs b/Antlr3/Tool/Grammar.cs
index 245fdb1..f592502 100644
--- a/Antlr3/Tool/Grammar.cs
+++ b/Antlr3/Tool/Grammar.cs
@@ -1077,7 +1077,7 @@ namespace Antlr3.Tool
//tokenBuffer.discard( ANTLRParser.SL_COMMENT );
ANTLRParser parser = new ANTLRParser( tokenBuffer );
parser.FileName = this.FileName;
-            ANTLRParser.grammar__return result = null;
+            Antlr.Runtime.IAstRuleReturnScope<GrammarAST> result = null;
try
{
result = parser.grammar_( this );
@@ -1361,7 +1361,7 @@ namespace Antlr3.Tool
parser.GrammarType = this.type;
try
{
-                ANTLRParser.rule_return result = parser.rule();
+                Antlr.Runtime.IAstRuleReturnScope<GrammarAST> result = parser.rule();
return result.Tree;
}
catch (Exception e)
diff --git a/Antlr4.StringTemplate/Compiler/TemplateCompiler.cs b/Antlr4.StringTemplate/Compiler/TemplateCompiler.cs
index 2fe55a7..e28e8b8 100644
--- a/Antlr4.StringTemplate/Compiler/TemplateCompiler.cs
+++ b/Antlr4.StringTemplate/Compiler/TemplateCompiler.cs
@@ -155,7 +155,7 @@ namespace Antlr4.StringTemplate.Compiler

CommonTokenStream tokens = new CommonTokenStream(lexer);
TemplateParser p = new TemplateParser(tokens, ErrorManager, templateToken);
-            TemplateParser.templateAndEOF_return r = null;
+            IAstRuleReturnScope<CommonTree> r = null;
try
{
r = p.templateAndEOF();

