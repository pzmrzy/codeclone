commit 433ebf04c1c27dba7c145ec1986dc784c01f171d
Author:     Sanne Grinovero <sanne@hibernate.org>
AuthorDate: Wed Jul 11 11:51:03 2012 +0100
Commit:     Sanne Grinovero <sanne@hibernate.org>
CommitDate: Wed Jul 11 16:16:06 2012 +0100

Make it possible to override the gUnitExecutor logic used to determine invalid input

diff --git a/gunit/src/main/java/org/antlr/gunit/gUnitExecutor.java b/gunit/src/main/java/org/antlr/gunit/gUnitExecutor.java
index 1ac8319..397307e 100644
--- a/gunit/src/main/java/org/antlr/gunit/gUnitExecutor.java
+++ b/gunit/src/main/java/org/antlr/gunit/gUnitExecutor.java
@@ -377,11 +377,7 @@ public class gUnitExecutor implements ITestSuite {
}
}

-            /** Invalid input */
-            if ( tokens.index()!=tokens.size()-1 ) {
-            	//throw new InvalidInputException();
-            	ps2.print("Invalid input");
-            }
+            checkForValidInput(tokens, ps2);

if ( err.toString().length()>0 ) {
gUnitTestResult testResult = new gUnitTestResult(false, err.toString());
@@ -545,11 +541,7 @@ public class gUnitExecutor implements ITestSuite {
}
}

-            /** Invalid input */
-            if ( tokens.index()!=tokens.size()-1 ) {
-            	//throw new InvalidInputException();
-            	ps2.print("Invalid input");
-            }
+			checkForValidInput( tokens, ps2 );

if ( err.toString().length()>0 ) {
gUnitTestResult testResult = new gUnitTestResult(false, err.toString());
@@ -642,6 +634,13 @@ public class gUnitExecutor implements ITestSuite {
return testResult;
}

+	protected void checkForValidInput(CommonTokenStream tokens, PrintStream ps2) {
+		/** Invalid input */
+		if ( tokens.index() != tokens.size() - 1 ) {
+			// throw new InvalidInputException();
+			ps2.print( "Invalid input" );
+		}
+	}

public void onPass(ITestCase passTest) {


