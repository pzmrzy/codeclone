commit b5fa329c8312df4600cddc854865304a8fa766f9
Author:     acondit <acondit@parrt.spork>
AuthorDate: Sat May 7 08:03:31 2011 -0800
Commit:     acondit <acondit@parrt.spork>
CommitDate: Sat May 7 08:03:31 2011 -0800

Changes to match ANTLR3.4 revision.

[git-p4: depot-paths = "//depot/code/antlr/antlr3-main/": change = 8410]

diff --git a/runtime/ObjC/Framework/test/runtime/misc/ANTLRFastQueueTest.m b/runtime/ObjC/Framework/test/runtime/misc/ANTLRFastQueueTest.m
index 47d5e31..74508a7 100644
--- a/runtime/ObjC/Framework/test/runtime/misc/ANTLRFastQueueTest.m
+++ b/runtime/ObjC/Framework/test/runtime/misc/ANTLRFastQueueTest.m
@@ -15,14 +15,14 @@

-(void) testInit
{
-	ANTLRFastQueue *queue = [ANTLRFastQueue newANTLRFastQueue];
+	ANTLRFastQueue *queue = [[ANTLRFastQueue newANTLRFastQueue] retain];
STAssertNotNil(queue, @"Queue was not created and was nil");
[queue release];
}

-(void) testAddAndGet
{
-	ANTLRFastQueue *queue = [ANTLRFastQueue newANTLRFastQueue];
+	ANTLRFastQueue *queue = [[ANTLRFastQueue newANTLRFastQueue] retain];
STAssertNotNil(queue, @"Queue was not created and was nil");
[queue addObject:@"My String"];
STAssertTrue([[queue objectAtIndex:0] isKindOfClass:[NSString class]], @"First object is not a NSString");
@@ -33,25 +33,26 @@

-(void) testInvalidElementIndex
{
-    //ANTLRRuntimeException *ANTLRNoSuchElementException = [ANTLRRuntimeException newANTLRNoSuchElementException:@"No such element exception"];
+    //ANTLRRuntimeException *ANTLRNoSuchElementException = [ANTLRNoSuchElementException newException:@"No such element exception"];
id retVal;
-	ANTLRFastQueue *queue = [ANTLRFastQueue newANTLRFastQueue];
+	ANTLRFastQueue *queue = [[ANTLRFastQueue newANTLRFastQueue] retain];
STAssertNotNil(queue, @"Queue was not created and was nil");
@try
{
retVal = [queue objectAtIndex:100];
}
-	@catch (ANTLRRuntimeException *e)
+	@catch (ANTLRNoSuchElementException *e)
{
STAssertTrue([[e name] isEqualTo:@"ANTLRNoSuchElementException"], @"Exception was not type: ANTLRNoSuchElementException -- %@", [e name]);
return;
}
STFail(@"Exception ANTLRNoSuchElementException was not thrown -- %@", [retVal name]);
+    [queue release];
}

-(void) testHead
{
-	ANTLRFastQueue *queue = [ANTLRFastQueue newANTLRFastQueue];
+	ANTLRFastQueue *queue = [[ANTLRFastQueue newANTLRFastQueue] retain];
STAssertNotNil(queue, @"Queue was not created and was nil");
[queue addObject:@"Item 1"];
[queue addObject:@"Item 2"];
@@ -64,7 +65,7 @@

-(void) testClear
{
-	ANTLRFastQueue *queue = [ANTLRFastQueue newANTLRFastQueue];
+	ANTLRFastQueue *queue = [[ANTLRFastQueue newANTLRFastQueue] retain];
STAssertNotNil(queue, @"Queue was not created and was nil");
[queue addObject:@"Item 1"];
[queue addObject:@"Item 2"];
@@ -77,7 +78,7 @@

-(void) testDescription
{
-	ANTLRFastQueue *queue = [ANTLRFastQueue newANTLRFastQueue];
+	ANTLRFastQueue *queue = [[ANTLRFastQueue newANTLRFastQueue] retain];
STAssertNotNil(queue, @"Queue was not created and was nil");
[queue addObject:@"My"];
[queue addObject:@"String"];
@@ -87,7 +88,7 @@

-(void) testRemove
{
-	ANTLRFastQueue *queue = [ANTLRFastQueue newANTLRFastQueue];
+	ANTLRFastQueue *queue = [[ANTLRFastQueue newANTLRFastQueue] retain];
STAssertNotNil(queue, @"Queue was not created and was nil");
[queue addObject:@"My"];
[queue addObject:@"String"];

