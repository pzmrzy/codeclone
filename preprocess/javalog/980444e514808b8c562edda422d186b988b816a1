commit 980444e514808b8c562edda422d186b988b816a1
Author:     Ivan Brezina <ibrezina@ibrezina.net>
AuthorDate: Sun Aug 18 10:47:55 2013 +0200
Commit:     Ivan Brezina <ibre5041@ibrezina.net>
CommitDate: Mon Sep 9 11:42:59 2013 +0200

emitNew renamed to emit

- also fixed(calls set_token)

diff --git a/runtime/Cpp/include/antlr3lexer.hpp b/runtime/Cpp/include/antlr3lexer.hpp
index abd7768..cfff29f 100755
--- a/runtime/Cpp/include/antlr3lexer.hpp
+++ b/runtime/Cpp/include/antlr3lexer.hpp
@@ -177,10 +177,10 @@ public:
*/
void	popCharStream();

-    /** Pointer to a function that emits the supplied token as the next token in
+    /** Function that emits (a copy of ) the supplied token as the next token in
*  the stream.
*/
-    void	emitNew(const CommonTokenType& token);
+    void	emit(const CommonTokenType* token);

/** Pointer to a function that constructs a new token from the lexer stored information
*/
diff --git a/runtime/Cpp/include/antlr3lexer.inl b/runtime/Cpp/include/antlr3lexer.inl
index 06f3283..c8ccbd8 100755
--- a/runtime/Cpp/include/antlr3lexer.inl
+++ b/runtime/Cpp/include/antlr3lexer.inl
@@ -179,10 +179,9 @@ void	Lexer<ImplTraits>::popCharStream()
}

template<class ImplTraits>
-void	Lexer<ImplTraits>::emitNew(const CommonTokenType& token)
+void	Lexer<ImplTraits>::emit(const CommonTokenType* token)
{
-	CommonTokenType* tok = this->get_rec()->get_state()->get_token();	/* Voila!   */
-	*tok = token;
+	this->get_rec()->get_state()->set_token(token);
}

template<class ImplTraits>

