commit 610c956cecdbe71ad9edfb7ae308b2ad14b45990
Author:     Sam Harwell <sam@tunnelvisionlabs.com>
AuthorDate: Fri Jan 4 19:13:08 2013 -0600
Commit:     Sam Harwell <sam@tunnelvisionlabs.com>
CommitDate: Fri Jan 4 19:13:08 2013 -0600

Fix -make option not working when -o is specified

diff --git a/tool/src/main/java/org/antlr/tool/BuildDependencyGenerator.java b/tool/src/main/java/org/antlr/tool/BuildDependencyGenerator.java
index 5c0fdbd..77dee7e 100644
--- a/tool/src/main/java/org/antlr/tool/BuildDependencyGenerator.java
+++ b/tool/src/main/java/org/antlr/tool/BuildDependencyGenerator.java
@@ -32,7 +32,6 @@ import org.antlr.codegen.CodeGenerator;
import org.antlr.misc.Utils;
import org.stringtemplate.v4.ST;
import org.stringtemplate.v4.STGroup;
-import org.stringtemplate.v4.STGroupFile;

import java.io.*;
import java.util.ArrayList;
@@ -99,7 +98,7 @@ public class BuildDependencyGenerator {
List<File> files = new ArrayList<File>();
File outputDir = tool.getOutputDirectory(grammarFileName);
if (outputDir.getName().equals(".")) {
-            outputDir = null;
+            outputDir = outputDir.getParentFile();
} else if (outputDir.getName().indexOf(' ') >= 0) { // has spaces?
String escSpaces = Utils.replace(outputDir.toString(),
" ",

