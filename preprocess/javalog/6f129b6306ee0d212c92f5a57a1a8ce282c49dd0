commit 6f129b6306ee0d212c92f5a57a1a8ce282c49dd0
Author:     Sam Harwell <sam@tunnelvisionlabs.com>
AuthorDate: Thu Dec 13 15:22:31 2012 -0600
Commit:     Sam Harwell <sam@tunnelvisionlabs.com>
CommitDate: Thu Dec 13 18:00:37 2012 -0600

Simplify opPredicates template (update targets)

diff --git a/tool/src/main/java/org/antlr/analysis/SemanticContext.java b/tool/src/main/java/org/antlr/analysis/SemanticContext.java
index 94a042b..c78ce72 100644
--- a/tool/src/main/java/org/antlr/analysis/SemanticContext.java
+++ b/tool/src/main/java/org/antlr/analysis/SemanticContext.java
@@ -515,7 +515,7 @@ public abstract class SemanticContext {
eST = templates.getInstanceOf("orPredicates");
}
else {
-				eST = new ST("(<first(operands)><rest(operands):{o | ||<o>}>)");
+				eST = new ST("(<operands; separator=\"||\">)");
}
for (SemanticContext semctx : operands) {
eST.add("operands", semctx.genExpr(generator,templates,dfa));
diff --git a/tool/src/main/resources/org/antlr/codegen/templates/ActionScript/ActionScript.stg b/tool/src/main/resources/org/antlr/codegen/templates/ActionScript/ActionScript.stg
index 14333b2..1fdeadc 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/ActionScript/ActionScript.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/ActionScript/ActionScript.stg
@@ -1051,7 +1051,7 @@ s = <targetStateNumber>;<\n>

andPredicates(left,right) ::= "(<left>&&<right>)"

-orPredicates(operands) ::= "(<first(operands)><rest(operands):{o | ||<o>}>)"
+orPredicates(operands) ::= "(<operands; separator=\"||\">)"

notPredicate(pred) ::= "!(<evalPredicate(pred,{})>)"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/C/C.stg b/tool/src/main/resources/org/antlr/codegen/templates/C/C.stg
index 2d9cd4c..63646a7 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/C/C.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/C/C.stg
@@ -2624,7 +2624,7 @@ eotDFAEdge(targetStateNumber,edgeNumber, predicates) ::= <<

andPredicates(left,right) ::= "( (<left>) && (<right>) )"

-orPredicates(operands) ::= "((<first(operands)>)<rest(operands):{o | ||(<o>)}>)"
+orPredicates(operands) ::= "(<operands:{o|(<o>)}; separator=\"||\">)"

notPredicate(pred) ::= "!( <evalPredicate(pred,{})> )"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/CSharp2/CSharp2.stg b/tool/src/main/resources/org/antlr/codegen/templates/CSharp2/CSharp2.stg
index 5004d8a..a9b9107 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/CSharp2/CSharp2.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/CSharp2/CSharp2.stg
@@ -1450,7 +1450,7 @@ s = <targetStateNumber>;<\n>

andPredicates(left,right) ::= "(<left>&&<right>)"

-orPredicates(operands) ::= "(<first(operands)><rest(operands):{o | ||<o>}>)"
+orPredicates(operands) ::= "(<operands; separator=\"||\">)"

notPredicate(pred) ::= "!(<evalPredicate(...)>)"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/CSharp3/CSharp3.stg b/tool/src/main/resources/org/antlr/codegen/templates/CSharp3/CSharp3.stg
index 0f3193b..2a3c918 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/CSharp3/CSharp3.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/CSharp3/CSharp3.stg
@@ -1429,7 +1429,7 @@ s = <targetStateNumber>;<\n>

andPredicates(left,right) ::= "(<left>&&<right>)"

-orPredicates(operands) ::= "(<first(operands)><rest(operands):{o | ||<o>}>)"
+orPredicates(operands) ::= "(<operands; separator=\"||\">)"

notPredicate(pred) ::= "!(<evalPredicate(...)>)"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/Cpp/Cpp.stg b/tool/src/main/resources/org/antlr/codegen/templates/Cpp/Cpp.stg
index 3744f49..2494f4c 100755
--- a/tool/src/main/resources/org/antlr/codegen/templates/Cpp/Cpp.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/Cpp/Cpp.stg
@@ -2198,7 +2198,7 @@ eotDFAEdge(targetStateNumber,edgeNumber, predicates) ::= <<

andPredicates(left,right) ::= "( (<left>) && (<right>) )"

-orPredicates(operands) ::= "((<first(operands)>)<rest(operands):{o | ||(<o>)}>)"
+orPredicates(operands) ::= "(<operands:{o|(<o>)}; separator=\"||\">)"

notPredicate(pred) ::= "!( <evalPredicate(pred,{})> )"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/Delphi/Delphi.stg b/tool/src/main/resources/org/antlr/codegen/templates/Delphi/Delphi.stg
index bbf3dfb..7390fde 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/Delphi/Delphi.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/Delphi/Delphi.stg
@@ -1484,7 +1484,7 @@ S := <targetStateNumber>;<\n>

andPredicates(left,right) ::= "((<left>) and (<right>))"

-orPredicates(operands) ::= "((<first(operands)>)<rest(operands):{o | or (<o>)}>)"
+orPredicates(operands) ::= "(<operands:{o|(<o>)}; separator=\" or \">)"

notPredicate(pred) ::= "!(<evalPredicate(...)>)"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/Java/Java.stg b/tool/src/main/resources/org/antlr/codegen/templates/Java/Java.stg
index 55c1ca9..d85d402 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/Java/Java.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/Java/Java.stg
@@ -1163,7 +1163,7 @@ s = <targetStateNumber>;

andPredicates(left,right) ::= "(<left>&&<right>)"

-orPredicates(operands) ::= "(<first(operands)><rest(operands):{o | ||<o>}>)"
+orPredicates(operands) ::= "(<operands; separator=\"||\">)"

notPredicate(pred) ::= "!(<evalPredicate(pred,{})>)"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/JavaScript/JavaScript.stg b/tool/src/main/resources/org/antlr/codegen/templates/JavaScript/JavaScript.stg
index e0adab4..73cbaf4 100755
--- a/tool/src/main/resources/org/antlr/codegen/templates/JavaScript/JavaScript.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/JavaScript/JavaScript.stg
@@ -1069,7 +1069,7 @@ s = <targetStateNumber>;<\n>

andPredicates(left,right) ::= "(<left>&&<right>)"

-orPredicates(operands) ::= "(<first(operands)><rest(operands):{o | ||<o>}>)"
+orPredicates(operands) ::= "(<operands; separator=\"||\">)"

notPredicate(pred) ::= "!(<evalPredicate(...)>)"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/ObjC/ObjC.stg b/tool/src/main/resources/org/antlr/codegen/templates/ObjC/ObjC.stg
index 6559c84..369310a 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/ObjC/ObjC.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/ObjC/ObjC.stg
@@ -1655,7 +1655,7 @@ s = <targetStateNumber>;<\n> /* eotDFAEdge */

andPredicates(left,right) ::= "(<left>&&<right>)"

-orPredicates(operands) ::= "(<first(operands)><rest(operands):{o | ||<o>}>)"
+orPredicates(operands) ::= "(<operands; separator=\"||\">)"

notPredicate(pred) ::= "!(<evalPredicate(pred, {})>)"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/Perl5/Perl5.stg b/tool/src/main/resources/org/antlr/codegen/templates/Perl5/Perl5.stg
index fa875d1..1eb08ee 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/Perl5/Perl5.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/Perl5/Perl5.stg
@@ -1105,7 +1105,7 @@ s = <targetStateNumber>;<\n>

andPredicates(left,right) ::= "(<left> && <right>)"

-orPredicates(operands) ::= "(<first(operands)><rest(operands):{o | ||<o>}>)"
+orPredicates(operands) ::= "(<operands; separator=\"||\">)"

notPredicate(pred) ::= "!(<evalPredicate(...)>)"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/Python/Python.stg b/tool/src/main/resources/org/antlr/codegen/templates/Python/Python.stg
index 7cd278d..c4607be 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/Python/Python.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/Python/Python.stg
@@ -1210,7 +1210,7 @@ se:

andPredicates(left,right) ::= "((<left>) and (<right>))"

-orPredicates(operands) ::= "(<first(operands)><rest(operands):{o |  or <o>}>)"
+orPredicates(operands) ::= "(<operands; separator=\" or \">)"

notPredicate(pred) ::= "not (<evalPredicate(pred, {})>)"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/Ruby/Ruby.stg b/tool/src/main/resources/org/antlr/codegen/templates/Ruby/Ruby.stg
index dd26c0b..d743623 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/Ruby/Ruby.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/Ruby/Ruby.stg
@@ -996,7 +996,7 @@ e

andPredicates(left,right) ::= "( <left> ) and ( <right> )"

-orPredicates(operands) ::= "( <first(operands)> )<rest(operands):{o|  or ( <o> )}>"
+orPredicates(operands) ::= "<operands:{o|( <o> )}; separator=\" or \">"

notPredicate(pred) ::= "not ( <pred> )"

diff --git a/tool/src/main/resources/org/antlr/codegen/templates/Scala/Scala.stg b/tool/src/main/resources/org/antlr/codegen/templates/Scala/Scala.stg
index cd3f92e..bfd7c44 100644
--- a/tool/src/main/resources/org/antlr/codegen/templates/Scala/Scala.stg
+++ b/tool/src/main/resources/org/antlr/codegen/templates/Scala/Scala.stg
@@ -1114,7 +1114,7 @@ s = <targetStateNumber><\n>

andPredicates(left,right) ::= "(<left>&&<right>)"

-orPredicates(operands) ::= "(<first(operands)><rest(operands):{o | ||<o>}>)"
+orPredicates(operands) ::= "(<operands; separator=\"||\">)"

notPredicate(pred) ::= "!(<evalPredicate(pred,\"\")>)"


