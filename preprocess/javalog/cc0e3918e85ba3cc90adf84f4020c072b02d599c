commit cc0e3918e85ba3cc90adf84f4020c072b02d599c
Author:     parrt <parrt@antlr.org>
AuthorDate: Mon Jul 18 13:32:55 2011 -0800
Commit:     parrt <parrt@antlr.org>
CommitDate: Mon Jul 18 13:32:55 2011 -0800

Added tree method insertChild(int i, Object t).

[git-p4: depot-paths = "//depot/code/antlr/antlr3-main/": change = 8873]

diff --git a/runtime/Java/src/main/java/org/antlr/runtime/tree/BaseTree.java b/runtime/Java/src/main/java/org/antlr/runtime/tree/BaseTree.java
index 07e911a..34dd050 100644
--- a/runtime/Java/src/main/java/org/antlr/runtime/tree/BaseTree.java
+++ b/runtime/Java/src/main/java/org/antlr/runtime/tree/BaseTree.java
@@ -151,6 +151,18 @@ public abstract class BaseTree implements Tree {
t.setChildIndex(i);
}

+	/** Insert child t at child position i (0..n-1) by shifting children
+		i+1..n-1 to the right one position. Set parent / indexes properly
+	 	but does NOT collapse nil-rooted t's that come in here like addChild.
+	 */
+	public void insertChild(int i, Object t) {
+		if ( children==null ) return;
+		children.add(i, t);
+		// walk others to increment their child indexes
+		// set index, parent of this one too
+		this.freshenParentAndChildIndexes(i);
+	}
+
public Object deleteChild(int i) {
if ( children==null ) {
return null;
diff --git a/tool/CHANGES.txt b/tool/CHANGES.txt
index 99f4fd0..ffc225a 100644
--- a/tool/CHANGES.txt
+++ b/tool/CHANGES.txt
@@ -7,6 +7,10 @@ University of San Francisco

CHANGES

+July 18, 2011
+
+* Added tree method insertChild(int i, Object t).
+
July 14, 2011

* Added BaesTree.freshenParentAndChildIndexesDeeply() to recursively

